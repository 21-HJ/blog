{
  "hash": "b8d577950e4bd8312709b19226598d91",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"LLM을 이용한 분석 report 생성 (1)\"\ndescription: |\n  LLM을 이용하여 표 또는 그래프를 요약하는 Quarto 문서를 만들어 봅시다.\nimage: img/qgh.png\ncategories:\n  - R\n  - API\n  - Documentation\nauthor:\n  - name: Young Sun Park\n    url: https://github.com/ddspys\nfig_width: 400\ndate: 2024-10-14\nformat: html\nengine: knitr\nexecute:\n  freeze: true\ndraft: false\nlicense: CC BY-NC\n---\n\n\n\n\n\n\n# Introduction\n\nQuarto는 오픈소스 기반의 과학 및 기술 출판 시스템입니다.\n\n코드를 기반으로 문서를 생성하기 때문에 동일한 형식의 데이터으로부터 일정한 결과물을 얻을 수 있습니다.\n\n이는 문서의 일관성과 재사용성을 증대시키고 사람에 의한 실수를 줄이는 데 큰 도움이 됩니다.\n\n그러나 문서의 모든 요소를 코드의 형태로 만들 수 있는것은 아닙니다.\n\n이를테면 문서에 포함된 표 또는 그래프에 대한 설명은 작성자가 직접 작성해야합니다.\n\n이 과정을 효율적으로 해결하기 위해서 차라투에서는 LLM을 활용했습니다.\n\n# Prerequisites\n\n## Libraries\n\n### httr2\n\nOpenAI endpoint에 GET 요청을 실행하기 위한 라이브러리\n\n### ggplot2\n그래프를 그리기 위한 라이브러리\n\n### base64enc\n이미지를 base64로 인코딩 하기 위한 라이브러리\n\n### flextable\n복잡한 table을 만들기 위한 라이브러리\n\n### officer\nflextable을 html format으로 변환할 때 사용되는 라이브러리\n\n### magrittr\n\n파이프 연산자를 사용하기 위한 라이브러리\n\n### DBI (Optional)\n\nDB와 통신하기 위한 라이브러리\n\n### RSQLite (Optional)\n\nSqlite3 인터페이스 라이브러리\n\n### digest (Optional)\n\n해쉬 알고리즘을 위한 라이브러리\n\n## OpenAI api key\n\n본 과정에서는 OpenAI 사의 GPT4o-mini 모델을 활용했습니다.\n\n본인의 OpenAI api 키를 발급받을 경우 동일한 방식으로 실습을 진행하실 수 있습니다.\n\n<https://openai.com/index/openai-api/>\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nopenai_key <- \"your openAI key\"\nendpoint <- \"https://api.openai.com/v1/\"\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n# Features\n\n## Instruction\n\nOpenAI endpoint로 요청 시 Text parameter가 포함 됩니다.\n\n이 Text에는 작업 지시 사항인 Instruction과 분석할 데이터가 포함됩니다.\n\nInstruction의 예시는 다음과 같습니다.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstruction <- \"지침:\n- 한글로 4문장 이상 답변하세요.\n- 표에 있는 범주별로 내용을 설명하세요.\n- 각 범주에 포함된 모든 항목에 대해 설명하세요.\"\n```\n:::\n\n\n\n## Request\n\nEndpoint(https://api.openai.com/v1/chat/completions)로 요청 시 다음의 parameter가 사용되었습니다.\n\n-   Header\n    -   Content-Type: application/json\n    -   Authorization: Bearer \\$OPENAI_API_KEY\n-   Body\n    -   model(\\*): gpt-4o-mini \\[openAI의 다른 모델도 사용할 수 있습니다\\]\n    -   temperature: 0.2 \\[0과 2 사이의 값, 높을수록 무작위적이며 창의적인 대답을 내놓음\\]\n    -   messages(\\*):\n        -   role: user\n        -   content:\n            -   type: text\n            -   text: Introduction과 Table data\n\n### Table\n\nLLM이 table을 인식하기 위해서는 table이 적절한 형식으로 변환되어야 합니다. LLM이 인식 할 수 있는 형식은 크게 두가지입니다.\n\n#### Markdown\n\n마크다운은 일반 텍스트 기반의 경량 마크업 언어입니다. 누구나 쉽게 작성할 수 있다는 장점이 있으며 표 또한 텍스트를 통해 생성 할 수 있습니다. 다만 복잡한 형태의 표 (예: 계층 구조)의 경우 표현하기 어렵다는 단점이 있습니다.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconvert_to_markdown <- function(table) {\n  df_from_ft <- as.data.frame(table)\n  markdown_table <- capture.output(cat(knitr::kable(table, format = \"markdown\"), sep = \"\\n\"))\n  return(paste(markdown_table, collapse = \"\\n\"))\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(mtcars[1:5])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   mpg cyl disp  hp drat\nMazda RX4         21.0   6  160 110 3.90\nMazda RX4 Wag     21.0   6  160 110 3.90\nDatsun 710        22.8   4  108  93 3.85\nHornet 4 Drive    21.4   6  258 110 3.08\nHornet Sportabout 18.7   8  360 175 3.15\nValiant           18.1   6  225 105 2.76\n```\n\n\n:::\n\n```{.r .cell-code}\ncat(convert_to_markdown(head(mtcars[1:5])))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n|                  |  mpg| cyl| disp|  hp| drat|\n|:-----------------|----:|---:|----:|---:|----:|\n|Mazda RX4         | 21.0|   6|  160| 110| 3.90|\n|Mazda RX4 Wag     | 21.0|   6|  160| 110| 3.90|\n|Datsun 710        | 22.8|   4|  108|  93| 3.85|\n|Hornet 4 Drive    | 21.4|   6|  258| 110| 3.08|\n|Hornet Sportabout | 18.7|   8|  360| 175| 3.15|\n|Valiant           | 18.1|   6|  225| 105| 2.76|\n```\n\n\n:::\n:::\n\n\n\n#### HTML\n\n일반적인 data.frame 객체는 마크다운으로 변환할 수 있습니다.\n\n그러나 flextable처럼 Cell이 합쳐진 형태나 계층적 구조일 경우 markdown으로의 변환이 어렵습니다.\n\n이 경우 html table 형태로 변환할 수 있습니다.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproc_freq(mtcars, \"gear\", \"vs\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-3cf9587a{}.cl-3cf1cf92{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-3cf1cf9c{font-family:'DejaVu Sans';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-3cf5306a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3cf53074{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3cf5307e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3cf5307f{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3cf53080{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3cf55356{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55360{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55361{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5536a{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5536b{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5536c{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5536d{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55374{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55375{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55376{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5537e{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5537f{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55380{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55381{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55382{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55388{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55389{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5538a{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5538b{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5538c{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55392{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55393{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55394{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55395{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf55396{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5539c{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5539d{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5539e{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf5539f{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553a0{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553a6{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553a7{width:0.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553a8{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553a9{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3cf553b0{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-3cf9587a'><thead><tr style=\"overflow-wrap:break-word;\"><th  rowspan=\"2\"class=\"cl-3cf55356\"><p class=\"cl-3cf5306a\"><span class=\"cl-3cf1cf92\">gear</span></p></th><th  rowspan=\"2\"class=\"cl-3cf55360\"><p class=\"cl-3cf5306a\"><span class=\"cl-3cf1cf92\"></span></p></th><th  colspan=\"3\"class=\"cl-3cf55361\"><p class=\"cl-3cf53074\"><span class=\"cl-3cf1cf92\">vs</span></p></th></tr><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-3cf55374\"><p class=\"cl-3cf53074\"><span class=\"cl-3cf1cf92\">0</span></p></th><th class=\"cl-3cf55375\"><p class=\"cl-3cf53074\"><span class=\"cl-3cf1cf92\">1</span></p></th><th class=\"cl-3cf55376\"><p class=\"cl-3cf53074\"><span class=\"cl-3cf1cf92\">Total</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3cf5537e\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">3</span></p></td><td class=\"cl-3cf5537f\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Count</span></p></td><td class=\"cl-3cf55380\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">12 (37.5%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55381\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">3 (9.4%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55382\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">15 (46.9%)</span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3cf55389\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Mar. pct</span><span class=\"cl-3cf1cf9c\"> (1)</span></p></td><td class=\"cl-3cf5538a\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">66.7% ; 80.0%</span></p></td><td class=\"cl-3cf5538b\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">21.4% ; 20.0%</span></p></td><td class=\"cl-3cf5538c\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3cf5537e\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">4</span></p></td><td class=\"cl-3cf5537f\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Count</span></p></td><td class=\"cl-3cf55380\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">2 (6.2%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55381\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">10 (31.2%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55382\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">12 (37.5%)</span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3cf55389\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Mar. pct</span></p></td><td class=\"cl-3cf5538a\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">11.1% ; 16.7%</span></p></td><td class=\"cl-3cf5538b\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">71.4% ; 83.3%</span></p></td><td class=\"cl-3cf5538c\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3cf5537e\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">5</span></p></td><td class=\"cl-3cf5537f\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Count</span></p></td><td class=\"cl-3cf55380\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">4 (12.5%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55381\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">1 (3.1%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf55382\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">5 (15.6%)</span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3cf55393\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Mar. pct</span></p></td><td class=\"cl-3cf55394\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">22.2% ; 80.0%</span></p></td><td class=\"cl-3cf55395\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\">7.1% ; 20.0%</span></p></td><td class=\"cl-3cf55396\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\"></span><span class=\"cl-3cf1cf92\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3cf5539c\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Total</span></p></td><td class=\"cl-3cf5539d\"><p class=\"cl-3cf5307e\"><span class=\"cl-3cf1cf92\">Count</span></p></td><td class=\"cl-3cf5539e\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">18 (56.2%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf5539f\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">14 (43.8%)</span><span class=\"cl-3cf1cf92\"></span></p></td><td class=\"cl-3cf553a0\"><p class=\"cl-3cf5307f\"><span class=\"cl-3cf1cf92\">32 (100.0%)</span><span class=\"cl-3cf1cf92\"></span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"5\"class=\"cl-3cf553a6\"><p class=\"cl-3cf53080\"><span class=\"cl-3cf1cf9c\"> (1)</span><span class=\"cl-3cf1cf92\"> Columns and rows percentages</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(proc_freq(mtcars, \"gear\", \"vs\") %>% to_html)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<div class=\"tabwid\"><style>.cl-3d30de44{}.cl-3d29acaa{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-3d29acbe{font-family:'DejaVu Sans';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-3d2c7098{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3d2c70a2{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3d2c70ac{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3d2c70ad{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3d2c70ae{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-3d2c905a{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9064{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9065{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9066{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c906e{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c906f{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9070{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9078{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9079{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9082{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9083{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9084{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9085{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c908c{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c908d{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c908e{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c908f{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9090{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9096{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9097{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c9098{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90a0{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90a1{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90a2{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90a3{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90aa{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90ab{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90ac{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90ad{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90ae{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90b4{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90b5{width:0.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90be{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90bf{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-3d2c90c0{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.tabwid {\n  font-size: initial;\n  padding-bottom: 1em;\n}\n\n.tabwid table{\n  border-spacing:0px !important;\n  border-collapse:collapse;\n  line-height:1;\n  margin-left:auto;\n  margin-right:auto;\n  border-width: 0;\n  border-color: transparent;\n  caption-side: top;\n}\n.tabwid-caption-bottom table{\n  caption-side: bottom;\n}\n.tabwid_left table{\n  margin-left:0;\n}\n.tabwid_right table{\n  margin-right:0;\n}\n.tabwid td, .tabwid th {\n    padding: 0;\n}\n.tabwid a {\n  text-decoration: none;\n}\n.tabwid thead {\n    background-color: transparent;\n}\n.tabwid tfoot {\n    background-color: transparent;\n}\n.tabwid table tr {\nbackground-color: transparent;\n}\n.katex-display {\n    margin: 0 0 !important;\n}</style><table data-quarto-disable-processing='true' class='cl-3d30de44'><thead><tr style=\"overflow-wrap:break-word;\"><th  rowspan=\"2\"class=\"cl-3d2c905a\"><p class=\"cl-3d2c7098\"><span class=\"cl-3d29acaa\">gear</span></p></th><th  rowspan=\"2\"class=\"cl-3d2c9064\"><p class=\"cl-3d2c7098\"><span class=\"cl-3d29acaa\"></span></p></th><th  colspan=\"3\"class=\"cl-3d2c9065\"><p class=\"cl-3d2c70a2\"><span class=\"cl-3d29acaa\">vs</span></p></th></tr><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-3d2c9078\"><p class=\"cl-3d2c70a2\"><span class=\"cl-3d29acaa\">0</span></p></th><th class=\"cl-3d2c9079\"><p class=\"cl-3d2c70a2\"><span class=\"cl-3d29acaa\">1</span></p></th><th class=\"cl-3d2c9082\"><p class=\"cl-3d2c70a2\"><span class=\"cl-3d29acaa\">Total</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3d2c9083\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">3</span></p></td><td class=\"cl-3d2c9084\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Count</span></p></td><td class=\"cl-3d2c9085\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">12 (37.5%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908c\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">3 (9.4%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908d\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">15 (46.9%)</span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3d2c908f\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Mar. pct</span><span class=\"cl-3d29acbe\"> (1)</span></p></td><td class=\"cl-3d2c9090\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">66.7% ; 80.0%</span></p></td><td class=\"cl-3d2c9096\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">21.4% ; 20.0%</span></p></td><td class=\"cl-3d2c9097\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3d2c9083\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">4</span></p></td><td class=\"cl-3d2c9084\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Count</span></p></td><td class=\"cl-3d2c9085\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">2 (6.2%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908c\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">10 (31.2%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908d\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">12 (37.5%)</span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3d2c908f\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Mar. pct</span></p></td><td class=\"cl-3d2c9090\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">11.1% ; 16.7%</span></p></td><td class=\"cl-3d2c9096\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">71.4% ; 83.3%</span></p></td><td class=\"cl-3d2c9097\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-3d2c9083\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">5</span></p></td><td class=\"cl-3d2c9084\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Count</span></p></td><td class=\"cl-3d2c9085\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">4 (12.5%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908c\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">1 (3.1%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c908d\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">5 (15.6%)</span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3d2c90a0\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Mar. pct</span></p></td><td class=\"cl-3d2c90a1\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">22.2% ; 80.0%</span></p></td><td class=\"cl-3d2c90a2\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\">7.1% ; 20.0%</span></p></td><td class=\"cl-3d2c90a3\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\"></span><span class=\"cl-3d29acaa\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-3d2c90aa\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Total</span></p></td><td class=\"cl-3d2c90ab\"><p class=\"cl-3d2c70ac\"><span class=\"cl-3d29acaa\">Count</span></p></td><td class=\"cl-3d2c90ac\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">18 (56.2%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c90ad\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">14 (43.8%)</span><span class=\"cl-3d29acaa\"></span></p></td><td class=\"cl-3d2c90ae\"><p class=\"cl-3d2c70ad\"><span class=\"cl-3d29acaa\">32 (100.0%)</span><span class=\"cl-3d29acaa\"></span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"5\"class=\"cl-3d2c90b4\"><p class=\"cl-3d2c70ae\"><span class=\"cl-3d29acbe\"> (1)</span><span class=\"cl-3d29acaa\"> Columns and rows percentages</span></p></td></tr></tfoot></table></div>\n```\n\n\n:::\n:::\n\n\n\n\n\n### Figure\n\n만약 이미지에 대한 설명을 원한다면 이미지에 대한 파라미터를 추가해야합니다.\n\n-   Header\n    -   Content-Type: application/json\n    -   Authorization: Bearer \\$OPENAI_API_KEY\n-   Body\n    -   model(\\*): gpt-4o-mini \\[openAI의 다른 모델도 사용할 수 있습니다\\]\n    -   temperature: 0.2 \\[0과 2 사이의 값, 높을수록 무작위적이며 창의적인 대답을 내놓음\\]\n    -   messages(\\*):\n        -   role: user\n        -   content:\n            -   type: text\n            -   text: Introduction과 Table data\n            -   type: image_url\n            -   image_url:\n                -   url: base64로 인코딩된 이미지\n                \n이미지는 base64로 인코딩되어 전달됩니다.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nLLM_description <- function(inst = \"다음에 대해 설명하시오\", ## 지침\n                         add_inst = NULL, ## 추가 지침\n                         table = \"\", ## 데이터가 포함된 표\n                         image_path = NULL, ## 이미지 경로 (Local 또는 웹)\n                         model = \"gpt-4o-mini\", ## 사용 할 LLM 모델\n                         temperature = 0.2, ## 무작위성 (낮을수록 일관된 답변)\n                         endpoint = \"https://api.openai.com/v1/\" ## 엔드포인트\n                         ){\n  \n  ## LLM에게 전달 할 내용\n  ### 주요 지침\n  ### 추가 지침\n  ### 표\n  text <- paste(\n    \"주요 지침: \",\n    inst,\n    ifelse(is.null(add_inst), ## 추가 지침이 존재 할 경우 추가\n           \" \",\n           \"추가 지침: \"),\n    add_inst,\n    \"도표: \",\n    table, ## Markdown 또는 html 형태의 table\n    sep = \"\\n\\n\"\n\n  )\n  \n  \n  url <- NULL\n  if(!is.null(image_path)){ ## image path가 전달\n    if(file.exists(image_path)){\n      ## 로컬파일인 경우\n      url <- paste0(\"data:image/png;base64,\",base64encode(image_path))\n    }else{\n      ## 로컬파일이 아닌 경우(Web 이미지 가정)\n      \n      ## 이미지 다운로드\n      resp <- request(image_path) %>% \n        req_perform()\n      \n      \n      if(resp$status_code == 200){\n        ## 정상적인 응답 시\n        image_raw <- resp_body_raw(resp)\n        encoded_image <- base64encode(image_raw)\n        url <- paste0(\"data:image/png;base64,\",encoded_image )\n        \n      } else{\n        ## 비정상적인 응답 시\n        warning(\"Failed to download the image. Status code:\", response$status_code)\n      }\n      \n      \n    }\n  }\n  \n  ## 이미지 컴포넌트\n  image_cmp <- NULL\n  \n  \n  if(!is.null(url)){\n    ## 이미지가 존재할 경우\n    \n    ## 이미지\n    image_cmp <- list(\n            type = \"image_url\",\n            image_url = list(\n              url = url\n            )\n          )\n    \n    ## 이미지가 포함된 content\n    content <- \n      list(\n          list(\n            type = \"text\",\n            text =  text\n          ),\n          image_cmp\n\n        )\n  }else{\n    ## 이미지가 존재하지 않을 경우\n    ## text만 content에 포함\n    content <- list(\n          list(\n            type = \"text\",\n            text =  text\n          )\n\n        )\n  }\n  \n  \n\nreq <- request(endpoint) %>% ## 엔드포인트\n  req_url_path_append(\"chat\") %>% ## 주소 1\n  req_url_path_append(\"completions\") %>% ##주소 2\n  req_headers(\n    `Content-Type` = \"application/json\",\n    Authorization = paste(\"Bearer\", openai_key) ## API키 전달\n  ) %>% \n  req_body_json(\n    list(\n      model = model, ## LLM 모델\n      temperature = temperature, \n      messages = list(list(\n        role = \"user\",\n        content = content\n      )\n    )),\n    auto_unbox = T\n  )\n\n\n\nresp <- req %>% \n  req_perform() ## 요청 실행\ntmp <- resp %>% \n  resp_body_json() ## 응답을 json 형태로 전환\n\n\n\nreturn(tmp$choices[[1]]$message$content) ## 응답 부분만 반환\n}\n```\n:::\n\n\n\n## Database (Optional)\n\nQuarto 문서를 랜더링 할 때마다 OpenAI endpoint에 결과를 요청할 경우 상당한 비용을 초래할 수 있습니다. 따라서 동일한 parameter로 request 할 경우 DB에 저장된 결과를 대신 반환하도록 sqlite3를 이용하여 캐시 DB를 구성했습니다. 본 포스팅에서는 생략합니다.\n\n# Examples\n\n## data.frame 형태의 표에 대한 설명\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(mtcars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(LLM_description(\n  inst = \"다음 표에 대해 설명하시오\",\n  add_inst = \"이 표는 자동차에 관한 표이다.\",\n  table = convert_to_markdown(mtcars)\n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n이 표는 다양한 자동차 모델에 대한 여러 가지 성능 및 특성을 나열한 데이터입니다. 각 열은 자동차의 특정 속성을 나타내며, 각 행은 특정 자동차 모델을 나타냅니다. 아래는 각 열의 설명입니다:\n\n1. **mpg (Miles Per Gallon)**: 연비를 나타내며, 차량이 1갤런의 연료로 주행할 수 있는 거리(마일)를 의미합니다. 높은 mpg 값은 연료 효율성이 좋음을 나타냅니다.\n\n2. **cyl (Cylinders)**: 엔진의 실린더 수를 나타냅니다. 일반적으로 실린더 수가 많을수록 엔진의 출력이 높아지지만, 연비는 낮아질 수 있습니다.\n\n3. **disp (Displacement)**: 엔진의 배기량을 나타내며, 보통 리터 단위로 표시됩니다. 배기량이 클수록 엔진의 힘이 강해질 수 있습니다.\n\n4. **hp (Horsepower)**: 엔진의 출력(마력)을 나타냅니다. 높은 hp 값은 차량의 성능이 뛰어남을 의미합니다.\n\n5. **drat (Rear Axle Ratio)**: 후륜 구동 비율을 나타내며, 차량의 가속 및 연비에 영향을 미치는 요소입니다.\n\n6. **wt (Weight)**: 차량의 무게를 나타내며, 일반적으로 무게가 가벼울수록 연비가 좋고, 성능이 향상될 수 있습니다.\n\n7. **qsec (Quarter Mile Time)**: 1/4 마일(약 402미터) 주행에 소요되는 시간을 나타내며, 성능을 평가하는 데 사용됩니다. 낮은 값일수록 빠른 가속을 의미합니다.\n\n8. **vs (V/S)**: 엔진의 배치 방식을 나타내며, 0은 V형 엔진, 1은 직렬형 엔진을 의미합니다.\n\n9. **am (Transmission Type)**: 변속기의 유형을 나타내며, 0은 자동 변속기, 1은 수동 변속기를 의미합니다.\n\n10. **gear (Number of Gears)**: 변속기의 기어 수를 나타냅니다. 기어 수가 많을수록 다양한 주행 조건에 적합할 수 있습니다.\n\n11. **carb (Carburetors)**: 카뷰레터의 수를 나타내며, 엔진의 연료 혼합 비율을 조절하는 장치입니다.\n\n이 표는 자동차의 성능, 연비, 엔진 특성 등을 비교하고 분석하는 데 유용하며, 소비자가 차량을 선택할 때 참고할 수 있는 중요한 정보를 제공합니다. 예를 들어, 연비가 높은 차량을 찾는 소비자는 'mpg' 열을 기준으로 차량을 비교할 수 있습니다.\n```\n\n\n:::\n:::\n\n\n\n## flextable 형태의 표에 대한 설명\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproc_freq(mtcars, \"gear\", \"vs\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"tabwid\"><style>.cl-433b242a{}.cl-43342774{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4334277e{font-family:'DejaVu Sans';font-size:6.6pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;position: relative;bottom:3.3pt;}.cl-43370728{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4337073c{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-43370746{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-43370747{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-43370748{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-43372848{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372852{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337285c{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337285d{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337285e{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372866{width:0.625in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372867{width:0.952in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372870{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372871{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337287a{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337287b{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337287c{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372884{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372885{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337288e{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337288f{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372890{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372891{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372898{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-43372899{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4337289a{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728a2{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728a3{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728a4{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728ac{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728ad{width:0.625in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728b6{width:0.952in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728b7{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728b8{width:1.279in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728c0{width:1.117in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728c1{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728c2{width:0.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728ca{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728cb{width:1.279in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 1pt solid rgba(102, 102, 102, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-433728cc{width:1.117in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 1pt solid rgba(102, 102, 102, 1.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-433b242a'><thead><tr style=\"overflow-wrap:break-word;\"><th  rowspan=\"2\"class=\"cl-43372848\"><p class=\"cl-43370728\"><span class=\"cl-43342774\">gear</span></p></th><th  rowspan=\"2\"class=\"cl-43372852\"><p class=\"cl-43370728\"><span class=\"cl-43342774\"></span></p></th><th  colspan=\"3\"class=\"cl-4337285c\"><p class=\"cl-4337073c\"><span class=\"cl-43342774\">vs</span></p></th></tr><tr style=\"overflow-wrap:break-word;\"><th class=\"cl-43372870\"><p class=\"cl-4337073c\"><span class=\"cl-43342774\">0</span></p></th><th class=\"cl-43372871\"><p class=\"cl-4337073c\"><span class=\"cl-43342774\">1</span></p></th><th class=\"cl-4337287a\"><p class=\"cl-4337073c\"><span class=\"cl-43342774\">Total</span></p></th></tr></thead><tbody><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-4337287b\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">3</span></p></td><td class=\"cl-4337287c\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Count</span></p></td><td class=\"cl-43372884\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">12 (37.5%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-43372885\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">3 (9.4%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-4337288e\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">15 (46.9%)</span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-43372890\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Mar. pct</span><span class=\"cl-4334277e\"> (1)</span></p></td><td class=\"cl-43372891\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">66.7% ; 80.0%</span></p></td><td class=\"cl-43372898\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">21.4% ; 20.0%</span></p></td><td class=\"cl-43372899\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-4337287b\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">4</span></p></td><td class=\"cl-4337287c\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Count</span></p></td><td class=\"cl-43372884\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">2 (6.2%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-43372885\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">10 (31.2%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-4337288e\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">12 (37.5%)</span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-43372890\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Mar. pct</span></p></td><td class=\"cl-43372891\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">11.1% ; 16.7%</span></p></td><td class=\"cl-43372898\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">71.4% ; 83.3%</span></p></td><td class=\"cl-43372899\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td  rowspan=\"2\"class=\"cl-4337287b\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">5</span></p></td><td class=\"cl-4337287c\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Count</span></p></td><td class=\"cl-43372884\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">4 (12.5%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-43372885\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">1 (3.1%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-4337288e\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">5 (15.6%)</span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-433728a2\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Mar. pct</span></p></td><td class=\"cl-433728a3\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">22.2% ; 80.0%</span></p></td><td class=\"cl-433728a4\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\">7.1% ; 20.0%</span></p></td><td class=\"cl-433728ac\"><p class=\"cl-43370747\"><span class=\"cl-43342774\"></span><span class=\"cl-43342774\"></span></p></td></tr><tr style=\"overflow-wrap:break-word;\"><td class=\"cl-433728ad\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Total</span></p></td><td class=\"cl-433728b6\"><p class=\"cl-43370746\"><span class=\"cl-43342774\">Count</span></p></td><td class=\"cl-433728b7\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">18 (56.2%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-433728b8\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">14 (43.8%)</span><span class=\"cl-43342774\"></span></p></td><td class=\"cl-433728c0\"><p class=\"cl-43370747\"><span class=\"cl-43342774\">32 (100.0%)</span><span class=\"cl-43342774\"></span></p></td></tr></tbody><tfoot><tr style=\"overflow-wrap:break-word;\"><td  colspan=\"5\"class=\"cl-433728c1\"><p class=\"cl-43370748\"><span class=\"cl-4334277e\"> (1)</span><span class=\"cl-43342774\"> Columns and rows percentages</span></p></td></tr></tfoot></table></div>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(LLM_description(\n  inst = \"다음 표에 대해 설명하시오.\",\n  add_inst = \"그래프는 gear 와 vs를 변수로 갖는 frequency table 이다.\",\n  table = proc_freq(mtcars, \"gear\", \"vs\") %>% to_html\n  ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n이 표는 \"gear\"와 \"vs\"라는 두 변수를 기반으로 한 빈도표(frequency table)입니다. 표의 구조는 다음과 같습니다:\n\n1. **열 설명**:\n   - 첫 번째 열은 \"gear\"의 값을 나타냅니다. 여기서는 3, 4, 5의 세 가지 값이 있습니다.\n   - 두 번째 열은 비어 있으며, 주로 \"Count\"와 \"Mar. pct\"라는 두 가지 하위 카테고리를 포함합니다.\n   - 세 번째 열은 \"vs\"의 값이 0인 경우의 데이터입니다.\n   - 네 번째 열은 \"vs\"의 값이 1인 경우의 데이터입니다.\n   - 다섯 번째 열은 각 \"gear\" 값에 대한 총합을 나타냅니다.\n\n2. **행 설명**:\n   - 각 \"gear\" 값에 대해 두 개의 행이 있습니다. 첫 번째 행은 각 \"vs\" 값에 대한 카운트와 비율을 나타내고, 두 번째 행은 \"Mar. pct\"로, 각 \"vs\" 값에 대한 비율을 보여줍니다.\n\n3. **데이터 해석**:\n   - 예를 들어, \"gear\"가 3일 때, \"vs\"가 0인 경우는 12건(37.5%)이고, \"vs\"가 1인 경우는 3건(9.4%)입니다. 총합은 15건(46.9%)입니다.\n   - \"Mar. pct\"는 각 \"vs\" 값에 대한 비율을 나타내며, \"gear\"가 3일 때는 66.7%와 21.4%입니다.\n\n4. **총합**:\n   - 마지막 행은 모든 \"gear\" 값에 대한 총합을 보여줍니다. \"vs\"가 0인 경우는 18건(56.2%), \"vs\"가 1인 경우는 14건(43.8%)이며, 총합은 32건(100.0%)입니다.\n\n이 표는 \"gear\"와 \"vs\" 간의 관계를 분석하는 데 유용하며, 각 조합의 빈도와 비율을 통해 데이터의 분포를 이해할 수 있습니다.\n```\n\n\n:::\n:::\n\n\n\n\n\n## 그래프 등의 이미지에 대한 설명\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_am_bar <- ggplot(mtcars) +\n  geom_bar(aes(factor(am)))\n\nplot_am_bar\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"img/am.png\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_am_bar_build <- ggplot_build(plot_am_bar)\ncat(LLM_description(\n  inst = \"다음 그래프에 대해 설명하시오.\",\n  add_inst = \"그래프는 자동차의 변속기 유형과 관련되어있다.\",\n  table = convert_to_markdown( plot_am_bar_build$data),\n  image_path = \"img/am.png\"\n  ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n그래프는 자동차의 변속기 유형에 따른 분포를 보여줍니다. x축은 변속기 유형을 나타내며, 0은 자동 변속기, 1은 수동 변속기를 의미합니다. y축은 각 변속기 유형의 자동차 수를 나타내며, count 값이 표시됩니다.\n\n그래프를 보면, 자동 변속기를 가진 자동차의 수가 약 19대인 반면, 수동 변속기를 가진 자동차는 약 13대입니다. 이는 자동 변속기를 가진 자동차가 수동 변속기보다 더 많다는 것을 나타냅니다. 전체적으로 자동 변속기가 더 선호되는 경향이 있음을 알 수 있습니다. \n\n색상은 회색으로 통일되어 있으며, 각 막대의 높이는 해당 변속기 유형의 자동차 수를 시각적으로 비교할 수 있게 해줍니다.\n```\n\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/tabwid-1.1.3/tabwid.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/tabwid-1.1.3/tabwid.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}